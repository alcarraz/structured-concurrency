\section{Implementación reactiva}\label{sec:el-problema:-reactive-programming}

\begin{frame}[fragile]
    \frametitle{Código de Ejemplo}
    \begin{minted}[fontsize=\footnotesize]{java}
public CompletableFuture<TransactionResult> processTransaction(TransactionRequest request) {
    return CompletableFuture
        .supplyAsync(() -> cardValidationService.validate(request.cardNumber()))
        .thenCompose(cardResult -> {
            if (!cardResult.success())
                return CompletableFuture.completedFuture(TransactionResult.failure(xxx));

            var balanceValidation = CompletableFuture.supplyAsync(() ->
                balanceService.validate(request.cardNumber(), request.amount()));
            // ... más validaciones paralelas

            return CompletableFuture.allOf(balanceValidation, pinValidation, xxx)
                .thenCompose(_ -> CompletableFuture.supplyAsync(() ->
                        balanceService.debit(request.cardNumber(), request.amount())));
        });
}
    \end{minted}
\end{frame}

\begin{frame}
    \frametitle{Problemas del Enfoque Reactivo}
    \begin{alertblock}{Complejidad Innecesaria}
        \begin{itemize}
            \item \textbf{Callback Hell:} Lógica anidada difícil de seguir
            \item \textbf{Manejo de Errores:} Excepciones complejas con \texttt{CompletionException}
            \item \textbf{Manejo de recursos:} Difícil garantizar cleanup
            \item \textbf{Depuración:} Stack traces confusos
            \item \textbf{Carga cognitiva:} Alto costo mental para leer/mantener
        \end{itemize}
    \end{alertblock}

    \begin{exampleblock}{Resultado}
        \begin{itemize}
            \item Eficiencia: Ejecución paralela
            \item Legibilidad: Código complejo
            \item Mantenibilidad: Lógica de negocio mezclada con la lógica de control.
            \item Testing: Complicado de probar
        \end{itemize}
    \end{exampleblock}
\end{frame}

